# Project name
spring.application.name=herapherigoods

# PostgreSQL (Supabase) database config (env-overridable)
spring.datasource.url=${DB_URL:jdbc:postgresql://db.kmwcinmjonqetgircdtr.supabase.co:5432/postgres?sslmode=require}
spring.datasource.username=${DB_USER:postgres}
spring.datasource.password=${DB_PASSWORD:}
spring.datasource.driver-class-name=org.postgresql.Driver

# Hibernate config (dev-friendly defaults)
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update

# Premium pricing (server-authoritative). Amounts are in INR.
app.premium.pricing.monthly.inr=59
app.premium.pricing.quarterly.inr=159
app.premium.pricing.half-yearly.inr=299
app.premium.pricing.yearly.inr=499

# Step 7: Rate limiting (defaults). Tune in production via env vars.
app.ratelimit.auth.login.ip.limit=10
app.ratelimit.auth.login.ip.window-seconds=300
app.ratelimit.auth.login.contact.limit=5
app.ratelimit.auth.login.contact.window-seconds=300

# Next step: Password login lockout (per contact number, in-memory)
app.auth.lockout.max-failures=5
app.auth.lockout.window-seconds=600
app.auth.lockout.lock-seconds=600

app.ratelimit.auth.check-user.ip.limit=30
app.ratelimit.auth.check-user.ip.window-seconds=60

app.ratelimit.auth.signup.ip.limit=10
app.ratelimit.auth.signup.ip.window-seconds=600
app.ratelimit.auth.signup.contact.limit=3
app.ratelimit.auth.signup.contact.window-seconds=600

app.ratelimit.auth.otp.verify.ip.limit=25
app.ratelimit.auth.otp.verify.ip.window-seconds=300
app.ratelimit.auth.otp.verify.contact.limit=10
app.ratelimit.auth.otp.verify.contact.window-seconds=300

app.ratelimit.payments.create-order.ip.limit=10
app.ratelimit.payments.create-order.ip.window-seconds=60
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# Flyway
# If `flyway_schema_history` was deleted but the schema already has tables,
# baseline will recreate the history table so the app can start.
spring.flyway.baseline-on-migrate=true
spring.flyway.schemas=public
spring.flyway.default-schema=public

# Disable entity scanning for DeletedVehicle and DeletedUser
spring.jpa.properties.hibernate.exclude-auto-scan-entities=com.example.demo.model.DeletedVehicle,com.example.demo.model.DeletedUser

# Enable SQL logging (dev only)
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Enable service/controller logs for location resolution
logging.level.com.example.demo=INFO

# File Upload Settings
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=50MB

# Supabase custom configs (env-overridable)
supabase.url=${SUPABASE_URL:https://kmwcinmjonqetgircdtr.supabase.co}
supabase.key=${SUPABASE_KEY:}
supabase.bucket.name=${SUPABASE_BUCKET:vehicle-images}
supabase.profile.bucket.name=${SUPABASE_PROFILE_BUCKET:profile-photos}

# Server
server.port=${PORT:8080}
server.forward-headers-strategy=framework

# CORS (dev + prod). Comma-separated list. Include "null" for file:// testing
app.cors.allowed-origins=http://localhost:5500,http://127.0.0.1:5500,http://localhost:3000,http://localhost:8080,https://herapherigoods.in,https://www.herapherigoods.in,https://api.herapherigoods.in,null

# CAPTCHA(disabled in dev). When enabled, backend will verify tokens
captcha.enabled=false
captcha.secret=${CAPTCHA_SECRET:}


# Razorpay (env-overridable)
razorpay.key.id=${RAZORPAY_KEY_ID:}
razorpay.key.secret=${RAZORPAY_KEY_SECRET:}

# 2Factor SMS (env-overridable)
twofactor.api.key=${TWOFACTOR_API_KEY:}
sms.enabled=${SMS_ENABLED:true}
sms.sender.id=${SMS_SENDER_ID:HPIGDS}
twofactor.template.login=${TWOFACTOR_TEMPLATE_LOGIN:userloginotp}
twofactor.template.signup=${TWOFACTOR_TEMPLATE_SIGNUP:usersignup}
twofactor.autogen.template-only=${TWOFACTOR_AUTOGEN_TEMPLATE_ONLY:true}


# Email (Zoho SMTP) - keep disabled by default in dev
mail.enabled=${MAIL_ENABLED:false}
mail.from=${MAIL_FROM:info@herapherigoods.in}
mail.admin.to=${MAIL_ADMIN_TO:info@herapherigoods.in}

spring.mail.host=${ZOHO_SMTP_HOST:smtp.zoho.in}
spring.mail.port=${ZOHO_SMTP_PORT:587}
spring.mail.username=${ZOHO_SMTP_USERNAME:info@herapherigoods.in}
spring.mail.password=${ZOHO_SMTP_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

